<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Marketplace Calculator V2.5.10</title>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

<style>
    /* ========================================================================= */
    /* --- GLOBAL RESET & MARKETPLACE BASE (Diambil dari Kalkulator MP) --- */
    /* ========================================================================= */
    html, body { 
        margin: 0; padding: 0; width: 100%; height: auto; min-height: 100%; 
        background-color: #ffffff; /* Warna background dari MP */
        font-family: Arial, sans-serif; 
        overflow-x: hidden; 
    }
    input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }

    /* ========================================================================= */
    /* --- CSS LOCK ACCESS --- */
    /* ========================================================================= */
    #lock-app { 
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #f4f6f8; 
        display: flex; justify-content: center; align-items: center;
        z-index: 9999;
        font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
    }

    #lock-app .login-card {
        background: white; width: 100%; max-width: 380px;
        padding: 40px 30px; border-radius: 20px; text-align: center;
        box-shadow: 0 10px 40px rgba(0,0,0,0.08); border: 1px solid #eee;
    }

    #lock-app .icon-lock {
        width: 60px; height: 60px; background: #e8f7f0; color: #00a76f;
        border-radius: 50%; display: inline-flex; align-items: center; justify-content: center;
        margin-bottom: 20px;
    }
    #lock-app h3 { margin: 0 0 10px; color: #333; font-weight: 700; }
    #lock-app p.desc { color: #888; font-size: 14px; margin-bottom: 25px; }
    #lock-app .input-group { text-align: left; margin-bottom: 15px; }
    #lock-app .input-group label { font-size: 12px; font-weight: 600; color: #666; display: block; margin-bottom: 5px;}
    #lock-app input[type="tel"], #lock-app input[type="email"] {
        width: 100%; padding: 14px 15px; font-size: 16px;
        border: 2px solid #f0f0f0; border-radius: 12px; outline: none;
        background: #fafafa; box-sizing: border-box; transition: 0.3s;
    }
    #lock-app input[type="tel"]:focus, #lock-app input[type="email"]:focus { border-color: #00a76f; background: #fff; }
    #lock-app button.btn-access {
        width: 100%; padding: 14px; font-size: 16px; font-weight: 600;
        color: white; background-color: #00a76f; border: none; border-radius: 12px;
        cursor: pointer; transition: 0.2s; box-sizing: border-box; margin-top: 10px;
    }
    #lock-app button.btn-access:hover { background-color: #008f5e; }
    #lock-app button.btn-access:disabled { background-color: #ccc; cursor: not-allowed; }
    #lock-app #actionArea { margin-top: 20px; display: none; }
    #lock-app .error-text { color: #d93025; font-size: 14px; font-weight: bold; margin-bottom: 15px; display: block;}
    #lock-app .btn-buy {
        display: block; width: 100%; padding: 14px; font-size: 16px; font-weight: 600;
        border-radius: 12px; margin-bottom: 15px; background: #222; color: white;
        text-decoration: none; box-sizing: border-box; text-align: center;
        transition: background 0.2s;
    }
    #lock-app .btn-buy:hover { background: #444; }
    #lock-app .link-cs { color: #666; font-size: 14px; text-decoration: none; font-weight: 500; }
    #lock-app .link-cs:hover { text-decoration: underline; color: #00a76f; }
    
    #main-app { display: none; } 

    /* ========================================================================= */
    /* --- CSS MARKETPLACE CALCULATOR (#marketplace-app) --- */
    /* ========================================================================= */
    #marketplace-app {
        padding: 20px; 
        width: 100%; 
        max-width: 450px;
        margin: 0 auto;
        display: block; 
        position: relative;
        padding-bottom: 25px;
    }
    
    /* Logout Button Style (Senada dengan Save to Gallery) */
    #marketplace-app .marketplace-logout-button { 
        width: 100%; 
        padding: 12px; 
        background-color: #222; 
        color: white; 
        font-size: 1.1em; 
        font-weight: bold; 
        border: none; 
        border-radius: 6px; 
        cursor: pointer; 
        transition: background-color 0.3s ease; 
        margin-top: 15px; 
        display: flex; 
        align-items: center; 
        justify-content: center; 
    }
    #marketplace-app .marketplace-logout-button:hover {
        background-color: #444; 
    }

    /* Styles di bawah ini disalin dari Marketplace Calculator dan disesuaikan ke #marketplace-app */
    #marketplace-app .version-tag { text-align: center; color: #6c757d; font-size: 0.9em; margin-top: -10px; margin-bottom: 25px; }
    #marketplace-app h2 { color: #333; text-align: center; margin-bottom: 20px; margin-top: 10px; }
    #marketplace-app hr { border: 0; height: 1px; background: #eee; margin: 20px 0; }
    #marketplace-app .input-group { margin-bottom: 20px; }
    #marketplace-app .input-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #000000; font-size: 1em; }
    #marketplace-app .input-row { display: flex; align-items: center; gap: 10px; }
    #marketplace-app .calculator-input { padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1em; width: 100%; }
    #marketplace-app .percentage-input { width: 80px; text-align: right; font-weight: bold; }
    #marketplace-app .slider-input { flex-grow: 1; height: 10px; -webkit-appearance: none; background: #e0e0e0; border-radius: 5px; cursor: pointer; padding: 0; }
    #marketplace-app .slider-input::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 22px; height: 22px; border-radius: 50%; background: #4CAF50; cursor: pointer; border: 3px solid #fff; box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); }
    #marketplace-app .slider-min-max { font-size: 0.8em; color: #999; margin-top: 5px; text-align: left; }
    #marketplace-app .action-button { width: 100%; padding: 12px; background-color: #4CAF50; color: white; font-size: 1.1em; font-weight: bold; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 10px; margin-bottom: 25px; }
    #marketplace-app .action-button:hover { background-color: #45a049; }
    #marketplace-app .action-button:disabled { background-color: #ccc; cursor: not-allowed; }
    #marketplace-app .save-button { width: 100%; padding: 12px; background-color: #4CAF50; color: white; font-size: 1.1em; font-weight: bold; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 15px; display: none; align-items: center; justify-content: center; }
    #marketplace-app .save-button:hover { background-color: #45a049; }
    #marketplace-app .rounding-options { display: flex; gap: 10px; }
    #marketplace-app .round-btn { flex: 1; text-align: center; padding: 10px 5px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; font-size: 0.9em; background: #fff; transition: all 0.2s; font-weight: bold; color: #777; }
    #marketplace-app .round-btn.active { background-color: #4CAF50; color: white; border-color: #4CAF50; box-shadow: 0 2px 5px rgba(76, 175, 80, 0.3); }
    #marketplace-app #captureArea { background-color: #ffffff; display: none; width: 100%; }
    #marketplace-app .output-card { background: #fff; border: 1px solid #eee; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.03); margin-bottom: 20px; width: 100%; }
    #marketplace-app .product-name-output { font-size: 1.1em; font-weight: bold; color: #333; text-align: center; margin-bottom: 5px; display: none; }
    #marketplace-app .generated-timestamp { font-size: 0.85em; color: #888; text-align: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; display: none; }
    #marketplace-app .detail-row { display: flex; justify-content: space-between; padding: 5px 0; font-size: 0.95em; color: #333; }
    #marketplace-app .detail-row strong { color: #000; font-size: 1em; font-weight: bold; }
    #marketplace-app .result-header { padding: 5px 0 10px 0; border-bottom: 2px solid #4CAF50; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
    #marketplace-app .result-header span { font-weight: bold; font-size: 1em; color: #333; }
    #marketplace-app .result-header strong { color: #4CAF50; font-weight: bold; font-size: 1em; }
    #marketplace-app .profit-row { padding-top: 5px; margin-bottom: 15px; display: flex; justify-content: space-between; }
    #marketplace-app .profit-row span { font-weight: bold; font-size: 1em; color: #333; }
    #marketplace-app .profit-row strong { color: #FF9800; font-weight: bold; font-size: 1em; }
    #marketplace-app .text-red-cost { color: #dc3545 !important; font-weight: bold; }
    #marketplace-app .separator-dashed { border-bottom: 1px dashed #ddd; margin: 8px 0; }
    #marketplace-app .separator-solid { border-bottom: 2px solid #eee; margin-bottom: 20px; }
    #marketplace-app .info-box { padding: 12px; background-color: #f5f5f5; border: 1px solid #eee; border-radius: 6px; font-size: 0.9em; color: #333; margin-bottom: 15px; }
    #marketplace-app .info-box-title { font-weight: bold; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-bottom: 10px; color: #000; font-size: 1.12em; display: block; }
    #marketplace-app .info-stacked-row { margin-bottom: 10px; border-bottom: 1px dashed #ccc; padding-bottom: 8px; }
    #marketplace-app .info-stacked-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    #marketplace-app .stack-label { display: block; color: #333; margin-bottom: 4px; text-align: left; font-weight: bold; font-size: 0.9em; }
    #marketplace-app .flex-split { display: flex; justify-content: space-between; align-items: center; width: 100%; }
    #marketplace-app .left-text { color: #666; font-weight: normal; text-align: left; font-size: 0.9em; }
    #marketplace-app .right-text { color: #000; font-weight: bold; text-align: right; font-size: 0.9em; }
    #marketplace-app .roas-table-container { width: 100%; border: 1px solid #eee; border-radius: 8px; overflow: hidden; background-color: #ffffff; box-shadow: 0 2px 8px rgba(0,0,0,0.03); }
    #marketplace-app .roas-header-title { font-weight: bold; color: #ffffff; font-size: 1.1em; padding: 12px; text-align: center; border-bottom: 1px solid #ffffff; margin: 0; background-color: #4CAF50; }
    #marketplace-app .roas-table { width: 100%; border-collapse: collapse; font-size: 0.85em; background-color: #ffffff; table-layout: fixed; }
    #marketplace-app .roas-table thead tr:first-child th:nth-child(1) { width: 15%; } 
    #marketplace-app .roas-table thead tr:first-child th:nth-child(2) { width: 22.5%; } 
    #marketplace-app .roas-table thead tr:first-child th:last-child { width: 20%; } 
    #marketplace-app .roas-table thead th { background-color: #F9F9F9; color: #000000; font-weight: bold; font-size: 0.85em; padding: 8px 3px; text-align: center; border-bottom: 1px solid #E0E0E0; border-right: 1px solid #E0E0E0; white-space: nowrap; }
    #marketplace-app .roas-table th, #marketplace-app .roas-table td { border-bottom: 1px solid #E0E0E0; border-right: 1px solid #E0E0E0; font-size: 0.85em; padding: 8px 3px; }
    #marketplace-app .roas-table th:last-child, #marketplace-app .roas-table td:last-child { border-right: none; }
    #marketplace-app .roas-table thead tr:nth-child(2) th:last-child { border-right: 1px solid #E0E0E0; }
    #marketplace-app .roas-table tbody tr:last-child td { border-bottom: none; }
    #marketplace-app .roas-table td { text-align: center; color: #333; }
    #marketplace-app .roas-table td:last-child { text-align: center !important; padding-left: 0; } 
    #marketplace-app .text-green { color: #28a745 !important; }
    #marketplace-app .text-red { color: #dc3545 !important; }
    #marketplace-app .fw-bold { font-weight: bold; }
    #marketplace-app .bg-target { background-color: #e8f5e9; } 
    #marketplace-app .bg-bep { background-color: #FFF6AC; font-weight: bold; } 
    #marketplace-app .bg-loss-severe { background-color: #ffebee; }
</style>
</head>
<body>

<div id="lock-app">
    <div class="login-card">
        <div class="icon-lock">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
        </div>

        <h3>Akses Member</h3>
        <p class="desc">Verifikasi Email & WhatsApp Anda.</p>

        <div class="input-group">
            <label>ALAMAT EMAIL</label>
            <input type="email" id="emailInput" placeholder="nama@email.com">
        </div>

        <div class="input-group">
            <label>NO HP / WA</label>
            <input type="tel" id="phoneInput" placeholder="62811000000" onkeypress="handleEnter(event)" oninput="this.value = this.value.replace(/[^0-9]/g, '')">
        </div>

        <button class="btn-access" onclick="checkCredentials()" id="btnSubmit">Masuk Aplikasi</button>

        <div id="actionArea">
            <span class="error-text">Login Gagal : Email atau Nomor HP Salah</span>
            <a href="https://tiiipen.com/p/masterclass" target="_blank" class="btn-buy">Beli Akses Sekarang</a>
            <a href="https://tiiipen.com/" target="_blank" class="link-cs">Butuh bantuan? Hubungi Admin</a>
        </div>
    </div>
</div>

<div id="main-app">
    
    <div id="marketplace-app">
        <h2>Marketplace Calculator</h2>
        <p class="version-tag">Versi 2.5.10 by Steven Alexander</p>
        <hr>
        
        <div class="input-group">
            <label for="productNameInput">Nama Produk <small style="font-weight:normal; color:#888;">*Opsional</small></label>
            <div class="input-row"><input type="text" id="productNameInput" class="calculator-input" placeholder="Contoh: Baju Kemeja Pria"></div>
        </div>

        <div class="input-group">
            <label for="modalPrice">Harga Modal (Rp)</label>
            <div class="input-row"><input type="text" inputmode="decimal" id="modalPrice" class="calculator-input" value="100.000"></div>
        </div>
        
        <div class="input-group slider-group">
            <label for="mpFeeRate">Biaya Layanan Marketplace (%)</label>
            <div class="input-row">
                <input type="range" id="mpFeeRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="15">
                <input type="number" id="mpFeeRate" class="calculator-input percentage-input" value="15" min="0" max="100">
            </div>
            <p class="slider-min-max">Min: 0% | Max: 50%</p>
            <p class="slider-min-max">Total Biaya Layanan, Extra Ongkir Dari Marketplace</p>
        </div>
        
        <div class="input-group slider-group">
            <label for="adsBudgetRate">Biaya Iklan / Ads (%)</label>
            <div class="input-row">
                <input type="range" id="adsBudgetRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="10">
                <input type="number" id="adsBudgetRate" class="calculator-input percentage-input" value="10" min="0" max="100">
            </div>
            <p class="slider-min-max">Min: 0% | Max: 50%</p>
            <p class="slider-min-max">Alokasi Budget Marketplace / Meta / TikTok Ads</p>
        </div>
        
        <div class="input-group slider-group">
            <label for="affiliateBudgetRate">Biaya Komisi Affiliator (%)</label>
            <div class="input-row">
                <input type="range" id="affiliateBudgetRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="5">
                <input type="number" id="affiliateBudgetRate" class="calculator-input percentage-input" value="5" min="0" max="100">
            </div>
            <p class="slider-min-max">Min: 0% | Max: 50%</p>
            <p class="slider-min-max">Alokasi Komisi Affiliator Setiap Produk Terjual</p>
        </div>
        
        <div class="input-group slider-group">
            <label for="operationalBudgetRate">Biaya Operasional (%)</label>
            <div class="input-row">
                <input type="range" id="operationalBudgetRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="5">
                <input type="number" id="operationalBudgetRate" class="calculator-input percentage-input" value="5" min="0" max="100">
            </div>
            <p class="slider-min-max">Min: 0% | Max: 50%</p>
            <p class="slider-min-max">Alokasi Biaya Operasional : Karyawan, Sewa Tempat, Dll</p>
        </div>

        <div class="input-group">
            <label for="otherCost">Biaya Lainnya (Rp) <small style="font-weight:normal; color:#888;">*Opsional</small></label>
            <div class="input-row"><input type="text" inputmode="decimal" id="otherCost" class="calculator-input" value="0"></div>
            <p></p>
            <p class="slider-min-max">Input Nominal Biaya Secara Manual</p>
            <p class="slider-min-max" style="margin-top:5px;">Contoh: Biaya Proses Order (Rp 1.250), Packing, dll</p>
        </div>

        <div class="input-group slider-group">
            <label for="profitMarginRate">Profit Margin / Keuntungan (%)</label>
            <div class="input-row">
                <input type="range" id="profitMarginRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="15">
                <input type="number" id="profitMarginRate" class="calculator-input percentage-input" value="15" min="0" max="100">
            </div>
            <p class="slider-min-max">Min: 0% | Max: 50%</p>
            <p class="slider-min-max">Tentukan Profit Yang Diinginkan, Dihitung Dari Harga Jual</p>
        </div>

        <hr>
        
        <div class="input-group">
            <label>Pembulatan Harga Jual Ke Atas <small style="font-weight:normal; color:#888;">*Opsional</small></label>
            <div class="rounding-options">
                <div class="round-btn active" onclick="setRounding(0)" id="round0">OFF</div>
                <div class="round-btn" onclick="setRounding(100)" id="round100">100</div>
                <div class="round-btn" onclick="setRounding(1000)" id="round1000">1rb</div>
                <div class="round-btn" onclick="setRounding(10000)" id="round10000">10rb</div>
            </div>
            <p></p>
            <p class="slider-min-max" style="margin-top:5px; text-align: left;">Abaikan opsi ini jika ingin dihitung sesuai harga rekomendasi</p>
        </div>

        <div class="input-group">
            <label for="actualPrice">Harga Jual Aktual (Rp) <small style="font-weight:normal; color:#888;">*Opsional</small></label>
            <div class="input-row"><input type="text" inputmode="decimal" id="actualPrice" class="calculator-input" value="0"></div>
            <p></p>
            <p class="slider-min-max">Input Nominal Biaya Secara Manual</p>
            <p class="slider-min-max" style="margin-top:5px;">Kosongkan Apabila Ingin Hitung Harga Jual Minimal</p>
        </div>
        
        <hr>
        
        <div class="input-group">
            <label>Total Persentase Biaya & Profit (Max 100%)</label>
            <div class="input-row" style="padding: 10px; border: 1px solid #ddd; border-radius: 6px; background-color: #f0f8ff;">
                <strong id="totalVariableOutput" style="color: #4CAF50; flex-grow: 1; text-align: center;">0.0%</strong>
            </div>
        </div>
        
        <hr>
        <button id="calculateButton" class="action-button">Kalkulasi</button>
        
        <div id="captureArea">
            <div class="output-card">
                <div id="productNameOutput" class="product-name-output"></div>
                <div id="generatedTimestamp" class="generated-timestamp"></div>

                <div class="detail-row result-header">
                    <span id="sellingPriceLabel">Harga Jual Minimal</span>
                    <strong id="minSellingPriceOutput">Rp 0</strong>
                </div>
                
                <div class="detail-row">
                    <span>Total Biaya</span>
                    <strong id="totalCostOutput" class="text-red-cost">Rp 0</strong>
                </div>
                <div class="detail-row">
                    <span>Harga Modal</span>
                    <strong id="modalPriceOutput">Rp 0</strong>
                </div>
                
                <div class="separator-dashed"></div>
                
                <div class="detail-row profit-row">
                    <span>Profit Margin / Keuntungan</span>
                    <strong id="profitAmountOutput">Rp 0</strong>
                </div>

                <div class="separator-solid"></div>

                <div class="info-box">
                    <span class="info-box-title">Rincian Biaya</span>
                    <div id="rowDetailMP" class="info-stacked-row">
                        <span class="stack-label">Biaya Layanan Marketplace</span>
                        <div class="flex-split"><span class="left-text" id="detailFormulaMP">-</span><span class="right-text" id="detailResultMP">Rp 0</span></div>
                    </div>
                    <div id="rowDetailAds" class="info-stacked-row">
                        <span class="stack-label">Biaya Iklan / Ads</span>
                        <div class="flex-split"><span class="left-text" id="detailFormulaAds">-</span><span class="right-text" id="detailResultAds">Rp 0</span></div>
                    </div>
                    <div id="rowDetailAff" class="info-stacked-row">
                        <span class="stack-label">Biaya Komisi Affiliator</span>
                        <div class="flex-split"><span class="left-text" id="detailFormulaAff">-</span><span class="right-text" id="detailResultAff">Rp 0</span></div>
                    </div>
                    <div id="rowDetailOps" class="info-stacked-row">
                        <span class="stack-label">Biaya Operasional</span>
                        <div class="flex-split"><span class="left-text" id="detailFormulaOps">-</span><span class="right-text" id="detailResultOps">Rp 0</span></div>
                    </div>
                    <div id="rowDetailOther" class="info-stacked-row">
                        <span class="stack-label">Biaya Lainnya</span>
                        <div class="flex-split"><span class="left-text" id="detailFormulaOther">Input Manual</span><span class="right-text" id="detailResultOther">Rp 0</span></div>
                    </div>
                </div> <div id="roasBreakdownContainer" class="roas-table-container">
                    <div class="roas-header-title">Simulasi Performa ROAS</div>
                    <table class="roas-table">
                        <thead>
                            <tr>
                                <th rowspan="2">ROAS</th><th rowspan="2">CPP</th><th colspan="2">Profit Bersih</th><th rowspan="2">Status</th>
                            </tr>
                            <tr><th>IDR</th><th>P&L</th></tr>
                        </thead>
                        <tbody id="roasTableBody"></tbody>
                    </table>
                </div>

                <button id="saveImageBtn" class="save-button">Save to Gallery</button>
                
                <button onclick="logout()" class="marketplace-logout-button">Log Out</button>

            </div> </div> </div> </div> <script src="script.js"></script>

</body>
</html>

