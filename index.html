<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketplace Calculator V2.5.10</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; width: 100%; height: auto; min-height: 100%; background-color: #ffffff; font-family: Arial, sans-serif; overflow-x: hidden; }
    input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }

    .calculator-container {
        padding: 20px; 
        width: 100%; 
        max-width: 450px;
        margin: 0 auto;
        display: block; 
        position: relative;
        padding-bottom: 25px;
    }

    p:last-of-type { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    .version-tag { text-align: center; color: #6c757d; font-size: 0.9em; margin-top: -10px; margin-bottom: 25px; }
    h2 { color: #333; text-align: center; margin-bottom: 20px; margin-top: 10px; }
    hr { border: 0; height: 1px; background: #eee; margin: 20px 0; }

    .input-group { margin-bottom: 20px; }
    .input-group label { display: block; margin-bottom: 8px; font-weight: bold; color: #000000; font-size: 1em; }
    .input-row { display: flex; align-items: center; gap: 10px; }
    .calculator-input { padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1em; width: 100%; }
    .percentage-input { width: 80px; text-align: right; font-weight: bold; }

    .slider-input { flex-grow: 1; height: 10px; -webkit-appearance: none; background: #e0e0e0; border-radius: 5px; cursor: pointer; padding: 0; }
    .slider-input::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 22px; height: 22px; border-radius: 50%; background: #4CAF50; cursor: pointer; border: 3px solid #fff; box-shadow: 0 0 5px rgba(0, 0, 0, 0.2); }
    .slider-min-max { font-size: 0.8em; color: #999; margin-top: 5px; text-align: left; }

    .action-button { 
        width: 100%; padding: 12px; background-color: #4CAF50; color: white; font-size: 1.1em; font-weight: bold; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease; 
        margin-top: 10px; margin-bottom: 25px; 
    }
    .action-button:hover { background-color: #45a049; }
    .action-button:disabled { background-color: #ccc; cursor: not-allowed; }

    .save-button { 
        width: 100%; padding: 12px; background-color: #4CAF50; color: white; font-size: 1.1em; font-weight: bold; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease; margin-top: 15px; 
        display: none; align-items: center; justify-content: center;
    }
    .save-button:hover { background-color: #45a049; }

    .rounding-options { display: flex; gap: 10px; }
    .round-btn {
        flex: 1; text-align: center; padding: 10px 5px;
        border: 1px solid #ddd; border-radius: 6px; 
        cursor: pointer; font-size: 0.9em; background: #fff;
        transition: all 0.2s; font-weight: bold; color: #777;
    }
    .round-btn.active {
        background-color: #4CAF50; color: white;
        border-color: #4CAF50;
        box-shadow: 0 2px 5px rgba(76, 175, 80, 0.3);
    }

    #captureArea {
        background-color: #ffffff;
        display: none; 
        width: 100%;
    }

    .output-card { 
        background: #fff; 
        border: 1px solid #eee; 
        border-radius: 8px; 
        padding: 20px; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.03); 
        margin-bottom: 20px;
        width: 100%;
    }

    .product-name-output { font-size: 1.1em; font-weight: bold; color: #333; text-align: center; margin-bottom: 5px; display: none; }
    .generated-timestamp { font-size: 0.85em; color: #888; text-align: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 10px; display: none; }

    .detail-row { display: flex; justify-content: space-between; padding: 5px 0; font-size: 0.95em; color: #333; }
    .detail-row strong { color: #000; font-size: 1em; font-weight: bold; }
    
    .result-header { padding: 5px 0 10px 0; border-bottom: 2px solid #4CAF50; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
    .result-header span { font-weight: bold; font-size: 1em; color: #333; }
    .result-header strong { color: #4CAF50; font-weight: bold; font-size: 1em; }
    
    .profit-row { padding-top: 5px; margin-bottom: 15px; display: flex; justify-content: space-between; }
    .profit-row span { font-weight: bold; font-size: 1em; color: #333; }
    .profit-row strong { color: #FF9800; font-weight: bold; font-size: 1em; }

    .text-red-cost { color: #dc3545 !important; font-weight: bold; }
    .separator-dashed { border-bottom: 1px dashed #ddd; margin: 8px 0; }
    .separator-solid { border-bottom: 2px solid #eee; margin-bottom: 20px; }

    .info-box { padding: 12px; background-color: #f5f5f5; border: 1px solid #eee; border-radius: 6px; font-size: 0.9em; color: #333; }
    .info-box-title { font-weight: bold; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-bottom: 10px; color: #000; font-size: 1.12em; display: block; }
    
    .info-stacked-row { margin-bottom: 10px; border-bottom: 1px dashed #ccc; padding-bottom: 8px; }
    .info-stacked-row:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    
    .stack-label { display: block; color: #333; margin-bottom: 4px; text-align: left; font-weight: bold; font-size: 0.9em; }
    .flex-split { display: flex; justify-content: space-between; align-items: center; width: 100%; }
    .left-text { color: #666; font-weight: normal; text-align: left; font-size: 0.9em; }
    .right-text { color: #000; font-weight: bold; text-align: right; font-size: 0.9em; }

    .roas-table-container { 
        width: 100%; 
        border: 1px solid #eee; 
        border-radius: 8px; 
        overflow: hidden; 
        background-color: #ffffff; 
        box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }
    .roas-header-title { font-weight: bold; color: #ffffff; font-size: 1.1em; padding: 12px; text-align: center; border-bottom: 1px solid #ffffff; margin: 0; background-color: #4CAF50; }
    .roas-table { width: 100%; border-collapse: collapse; font-size: 0.85em; background-color: #ffffff; table-layout: fixed; }
    .roas-table thead tr:first-child th:nth-child(1) { width: 15%; } 
    .roas-table thead tr:first-child th:nth-child(2) { width: 22.5%; } 
    .roas-table thead tr:first-child th:last-child { width: 20%; }  
    .roas-table thead th { background-color: #F9F9F9; color: #000000; font-weight: bold; font-size: 0.85em; padding: 8px 3px; text-align: center; border-bottom: 1px solid #E0E0E0; border-right: 1px solid #E0E0E0; white-space: nowrap; }
    .roas-table th, .roas-table td { border-bottom: 1px solid #E0E0E0; border-right: 1px solid #E0E0E0; font-size: 0.85em; padding: 8px 3px; }
    .roas-table th:last-child, .roas-table td:last-child { border-right: none; }
    .roas-table thead tr:nth-child(2) th:last-child { border-right: 1px solid #E0E0E0; }
    .roas-table tbody tr:last-child td { border-bottom: none; }
    .roas-table td { text-align: center; color: #333; }
    .roas-table td:last-child { text-align: center !important; padding-left: 0; } 
    
    .text-green { color: #28a745 !important; }
    .text-red { color: #dc3545 !important; }
    .fw-bold { font-weight: bold; }
    .bg-target { background-color: #e8f5e9; } 
    .bg-bep { background-color: #FFF6AC; font-weight: bold; } 
    .bg-loss-severe { background-color: #ffebee; }
    </style>
</head>
<body>

<div id="main-container" class="calculator-container">
    <h2>Marketplace Calculator</h2>
    <p class="version-tag">Versi 2.5.10 by Steven Alexander</p>
    <hr>
    
    <div class="input-group">
        <label for="productNameInput">Nama Produk <small style="font-weight:normal; color:#888;">*Opsional</small></label>
        <div class="input-row"><input type="text" id="productNameInput" class="calculator-input" placeholder="Contoh: Baju Kemeja Pria"></div>
    </div>

    <div class="input-group">
        <label for="modalPrice">Harga Modal (Rp)</label>
        <div class="input-row"><input type="text" inputmode="decimal" id="modalPrice" class="calculator-input" value="100.000"></div>
    </div>
    
    <div class="input-group slider-group">
        <label for="mpFeeRate">Biaya Layanan Marketplace (%)</label>
        <div class="input-row">
            <input type="range" id="mpFeeRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="15">
            <input type="number" id="mpFeeRate" class="calculator-input percentage-input" value="15" min="0" max="100">
        </div>
        <p class="slider-min-max">Min: 0% | Max: 50%</p>
        <p class="slider-min-max">Total Biaya Layanan, Extra Ongkir, Promo, Dll Dari Marketplace</p>
    </div>
    
    <div class="input-group slider-group">
        <label for="adsBudgetRate">Biaya Iklan / Ads (%)</label>
        <div class="input-row">
            <input type="range" id="adsBudgetRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="10">
            <input type="number" id="adsBudgetRate" class="calculator-input percentage-input" value="10" min="0" max="100">
        </div>
        <p class="slider-min-max">Min: 0% | Max: 50%</p>
        <p class="slider-min-max">Alokasi Budget Marketplace / Meta / TikTok Ads</p>
    </div>
    
    <div class="input-group slider-group">
        <label for="affiliateBudgetRate">Biaya Komisi Affiliator (%)</label>
        <div class="input-row">
            <input type="range" id="affiliateBudgetRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="5">
            <input type="number" id="affiliateBudgetRate" class="calculator-input percentage-input" value="5" min="0" max="100">
        </div>
        <p class="slider-min-max">Min: 0% | Max: 50%</p>
        <p class="slider-min-max">Alokasi Komisi Affiliator Setiap Produk Terjual</p>
    </div>
    
    <div class="input-group slider-group">
        <label for="operationalBudgetRate">Biaya Operasional (%)</label>
        <div class="input-row">
            <input type="range" id="operationalBudgetRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="5">
            <input type="number" id="operationalBudgetRate" class="calculator-input percentage-input" value="5" min="0" max="100">
        </div>
        <p class="slider-min-max">Min: 0% | Max: 50%</p>
        <p class="slider-min-max">Alokasi Biaya Operasional : Gaji Karyawan, Sewa Tempat, Dll</p>
    </div>

    <div class="input-group">
        <label for="otherCost">Biaya Lainnya (Rp) <small style="font-weight:normal; color:#888;">*Opsional</small></label>
        <div class="input-row"><input type="text" inputmode="decimal" id="otherCost" class="calculator-input" value="0"></div>
        <p></p>
        <p class="slider-min-max">Input Nominal Biaya Secara Manual</p>
        <p class="slider-min-max" style="margin-top:5px;">Contoh: Biaya Proses Order (Rp 1.250), Packing, dll</p>
    </div>

    <div class="input-group slider-group">
        <label for="profitMarginRate">Profit Margin / Keuntungan (%)</label>
        <div class="input-row">
            <input type="range" id="profitMarginRateSlider" class="calculator-input slider-input" min="0" max="50" step="0.5" value="15">
            <input type="number" id="profitMarginRate" class="calculator-input percentage-input" value="15" min="0" max="100">
        </div>
        <p class="slider-min-max">Min: 0% | Max: 50%</p>
        <p class="slider-min-max">Tentukan Profit Yang Diinginkan, Dihitung Dari Harga Jual</p>
    </div>

    <hr>
    
    <div class="input-group">
        <label>Pembulatan Harga Jual Ke Atas <small style="font-weight:normal; color:#888;">*Opsional</small></label>
        <div class="rounding-options">
            <div class="round-btn active" onclick="setRounding(0)" id="round0">OFF</div>
            <div class="round-btn" onclick="setRounding(100)" id="round100">100</div>
            <div class="round-btn" onclick="setRounding(1000)" id="round1000">1rb</div>
            <div class="round-btn" onclick="setRounding(10000)" id="round10000">10rb</div>
        </div>
        <p></p>
        <p class="slider-min-max" style="margin-top:5px; text-align: left;">Abaikan opsi ini jika ingin dihitung sesuai harga rekomendasi</p>
    </div>

    <div class="input-group">
        <label for="actualPrice">Harga Jual Aktual (Rp) <small style="font-weight:normal; color:#888;">*Opsional</small></label>
        <div class="input-row"><input type="text" inputmode="decimal" id="actualPrice" class="calculator-input" value="0"></div>
        <p></p>
        <p class="slider-min-max">Input Nominal Biaya Secara Manual</p>
        <p class="slider-min-max" style="margin-top:5px;">Kosongkan Apabila Ingin Hitung Harga Jual Minimal</p>
    </div>
    
    <hr>
    
    <div class="input-group">
        <label>Total Persentase Biaya & Profit (Max 100%)</label>
        <div class="input-row" style="padding: 10px; border: 1px solid #ddd; border-radius: 6px; background-color: #f0f8ff;">
            <strong id="totalVariableOutput" style="color: #4CAF50; flex-grow: 1; text-align: center;">0.0%</strong>
        </div>
    </div>
    
    <hr>
    <button id="calculateButton" class="action-button">Kalkulasi</button>
    
    <div id="captureArea">
        <div class="output-card">
            <div id="productNameOutput" class="product-name-output"></div>
            <div id="generatedTimestamp" class="generated-timestamp"></div>

            <div class="detail-row result-header">
                <span id="sellingPriceLabel">Harga Jual Minimal</span>
                <strong id="minSellingPriceOutput">Rp 0</strong>
            </div>
            
            <div class="detail-row">
                <span>Total Biaya</span>
                <strong id="totalCostOutput" class="text-red-cost">Rp 0</strong>
            </div>
            <div class="detail-row">
                <span>Harga Modal</span>
                <strong id="modalPriceOutput">Rp 0</strong>
            </div>
            
            <div class="separator-dashed"></div>
            
            <div class="detail-row profit-row">
                <span>Profit Margin / Keuntungan</span>
                <strong id="profitAmountOutput">Rp 0</strong>
            </div>

            <div class="separator-solid"></div>

            <div class="info-box">
                <span class="info-box-title">Rincian Biaya</span>
                <div id="rowDetailMP" class="info-stacked-row">
                    <span class="stack-label">Biaya Layanan Marketplace</span>
                    <div class="flex-split"><span class="left-text" id="detailFormulaMP">-</span><span class="right-text" id="detailResultMP">Rp 0</span></div>
                </div>
                <div id="rowDetailAds" class="info-stacked-row">
                    <span class="stack-label">Biaya Iklan / Ads</span>
                    <div class="flex-split"><span class="left-text" id="detailFormulaAds">-</span><span class="right-text" id="detailResultAds">Rp 0</span></div>
                </div>
                <div id="rowDetailAff" class="info-stacked-row">
                    <span class="stack-label">Biaya Komisi Affiliator</span>
                    <div class="flex-split"><span class="left-text" id="detailFormulaAff">-</span><span class="right-text" id="detailResultAff">Rp 0</span></div>
                </div>
                <div id="rowDetailOps" class="info-stacked-row">
                    <span class="stack-label">Biaya Operasional</span>
                    <div class="flex-split"><span class="left-text" id="detailFormulaOps">-</span><span class="right-text" id="detailResultOps">Rp 0</span></div>
                </div>
                <div id="rowDetailOther" class="info-stacked-row">
                    <span class="stack-label">Biaya Lainnya</span>
                    <div class="flex-split"><span class="left-text" id="detailFormulaOther">Input Manual</span><span class="right-text" id="detailResultOther">Rp 0</span></div>
                </div>
            </div>
        </div>

        <div id="roasBreakdownContainer" class="roas-table-container">
            <div class="roas-header-title">Simulasi Performa ROAS</div>
            <table class="roas-table">
                <thead>
                    <tr>
                        <th rowspan="2">ROAS</th><th rowspan="2">CPP</th><th colspan="2">Profit Bersih</th><th rowspan="2">Status</th>
                    </tr>
                    <tr><th>IDR</th><th>P&L</th></tr>
                </thead>
                <tbody id="roasTableBody"></tbody>
            </table>
        </div>
    </div>

    <button id="saveImageBtn" class="save-button">Save to Gallery</button>

</div>
<script src="script.js"></script>
</body>
</html>
